<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="https://www.facebook.com/2008/fbml" itemscope="itemscope" itemtype="http://schema.org/Product">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="readme-deploy" content="0a76ad4a2ae68a6f7b480e04f93f1d2d4fab9046">
    <title>Phoenix</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <meta name="description" content="Productive. Reliable. Fast. A productive web framework that does not compromise speed and maintainability">
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <meta property="og:title" content="Phoenix">
    <meta property="og:description" content="Productive. Reliable. Fast. A productive web framework that does not compromise speed and maintainability">
    <meta property="og:image" content="https://files.readme.io/PKPqx8L9TJSAY2Bnmw7F_phoenixframework-logo-white@2x.png">
    <meta property="og:site_name" content="Phoenix">
    <meta id="config-proxy-url" content="https://proxy.readme.io/proxy">
    <link rel="canonical" href="http://www.phoenixframework.org/www.phoenixframework.org">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Phoenix" href="/blog.rss">
    <link rel="stylesheet" href="/assets/css/base.css" />
    <script type="text/javascript" src="/assets/js/app.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-57337100-1', 'auto');
      ga('send', 'pageview');
    </script>
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400:sans-serif|Open+Sans:400:sans-serif" rel="stylesheet" type="text/css">
  </head>

  <body class="layout page-home body-none theme-solid header-solid header-bg-size-auto header-bg-pos-tl header-overlay-triangles lumosity-light undefined theme-threes ng-scope os-linux" cz-shortcut-listen="true">
<div class="wrapper">
  <header id="header" class="header">
    <div class="container">
      <h1 class="navbar-brand"><a href="/">Phoenix</a></h1>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="https://hexdocs.pm/phoenix/overview.html">Guides</a></li>
          <li><a href="https://hexdocs.pm/phoenix/Phoenix.html">Docs</a></li>
          <li><a href="/community">Community</a></li>
          <li><a href="https://github.com/phoenixframework/phoenix">GitHub</a></li>
          <li><a href="/blog" title="Blog">Blog</a></li>
        </ul>

        <ul class="nav navbar-nav pull-right">
          <li><a class="phx-book" href="https://pragprog.com/book/phoenix14/programming-phoenix-1-4" title="Book">üìô &nbsp;&nbsp; Book</a></li>
        </ul>
      </div>
    </div>
    </header>
    <br/>
<div class="container body-container">
  <div class="row">
    <div class="col-sm-3 border-right">
        <div class="sidebar-nav">
          <h4>News</h4>
          <ul>
            <li><a href="/blog/phoenix-1-3-0-released" class="active"><span>Phoenix 1.3.0 Released</span></a></li>
            <li><a href="/blog/contribution-sprint" class="active"><span>Contribution Sprint</span></a></li>
            <li><a href="/blog/upgrading-from-120-to-130" class="active"><span>Upgrading from 1.2.x to 1.3.0</span></a></li>
            <li><a href="/blog/upgrading-from-11x-to-120" class="active"><span>Upgrading from 1.1.x to 1.2.0</span></a></li>
            <li><a href="/blog/upgrading-from-111-to-112" class="active"><span>Upgrading from 1.1.1 to 1.1.2</span></a></li>
            <li><a href="/blog/upgrading-from-v10-to-v11" class="active"><span>Upgrading from v1.0 to v1.1</span></a></li>
            <li><a href="/blog/the-road-to-2-million-websocket-connections" class="active"><span>The Road to 2 Million Websocket Connections in Phoenix</span></a></li>
            <li><a href="/blog/phoenix-10-the-framework-for-the-modern-web-just-landed"><span>Phoenix 1.0 ‚Äì the framework for the modern web just landed</span></a></li>
            <li><a href="/blog/phoenix-0100-released-with-assets-handling-generat"><span>Phoenix 0.10.0 released with assets handling, generators, &amp; more</span></a></li>
          </ul>
        </div>
    </div>
    <div class="col-sm-9 border-left">
      <div class="docs-content">
        <div class="docs-header">
          <h1>Phoenix 1.4.0 released</h1>

            <div class="byline">
                <span>By Chris McCord</span>
                &nbsp;¬∑&nbsp;<span class="ago">2018-11-07</span>
                &nbsp;¬∑&nbsp;<span>v1.4.0</span>
            </div>

          <hr>
        </div>
        <div class="content block-content ready">
          <p>Phoenix 1.4 is out! This release ships with exciting new features, most notably HTTP2 support, improved development experience with faster compile times, new error pages, and local SSL certificate generation. Additionally, our channel layer internals receiveced an overhaul, providing better structure and extensibility. We also shipped a new and improved Presence javascript API, as well as Elixir formatter integration for our routing and testing DSLs.</p>
<h3>phx_new hex archive</h3>
<p>The <code class="inline">mix phx.new</code> archive can now be installed via hex, for a simpler, versioned installation experience.</p>
<p>To grab the new archive, simply run:</p>
<pre><code class="">$ mix archive.uninstall phx_new
$ mix archive.install hex phx_new 1.4.0</code></pre>
<p>The new generators also use <a href="https://milligram.io">Milligram</a> in favor of Bootstrap to support classless markup generation. The result is nice looking defaults that allow generated markup to be much more easily customized to your individual CSS requirements.</p>
<p><strong>Note</strong>: Existing Phoenix applications will continue to work on Elixir 1.4, but the new <code class="inline">phx.new</code> archive requires Elixir 1.5+.</p>
<h3>HTTP2</h3>
<p>Thanks to the release of Cowboy 2, Phoenix 1.4 supports HTTP2 with a
single line change to your <code class="inline">mix.exs</code>. Simply add <code class="inline">{:plug_cowboy, &quot;~&gt; 2.5&quot;}</code> to your deps and Phoenix will run with the Cowboy 2 adapter.</p>
<h3>Local SSL development</h3>
<p>Most browsers require connections over SSL for HTTP2 requests,
otherwise they fallback to HTTP 1.1 requests. To aid local development
over SSL, phoenix includes a new <code class="inline">phx.gen.cert</code> task which generates a
self-signed certificate for HTTPS testing in development.</p>
<p>See the <a href="https://hexdocs.pm/phoenix/Mix.Tasks.Phx.Gen.Cert.html">phx.gen.cert</a> docs for more information.</p>
<h3>Faster Development Compilation</h3>
<p>Our development compilation speeds have improved thanks to contributions to plug and compile-time changes. You can read more about the details in my <a href="https://dockyard.com/blog/2018/02/12/what-s-new-in-phoenix-development-february-2018">DockYard Phoenix post</a></p>
<h3>New Development 404 Page</h3>
<p>Our 404 page in development now lists the available routes for the
originating router, for example:</p>
<p><img src="//i.imgur.com/sueKW9B.jpg" alt=""/></p>
<h3>UserSocket connection info</h3>
<p>A highly requested feature has been access to more underlying transport information when using Phoenix channels. The 1.4 release now provides a <code class="inline">connect/3</code> UserSocket callback, which can provide connection information, such as the peer IP address, host information, and X-Headers of the HTTP request for WebSocket and Long-poll transports.</p>
<h3>New Presence JavaScript API</h3>
<p>A new, backwards compatible <code class="inline">Presence</code> JavaScript API has been
introduced to both resolve race conditions as well as simplify the
usage. Previously, multiple channel callbacks against
<code class="inline">&quot;presence_state</code> and <code class="inline">&quot;presence_diff&quot;</code> events were required on the
client which dispatched to <code class="inline">Presence.syncState</code> and
<code class="inline">Presence.syncDiff</code> functions. Now, the interface has been unified to
a single <code class="inline">onSync</code> callback and the presence object tracks its own
channel callbacks and state. For example:</p>
<pre><code class="javascript">let presence = new Presence(roomChannel)
presence.onSync(() =&gt; {
  console.log(&quot;users online:&quot;, presence.list((id, {name}) =&gt; name))
})</code></pre>
<p>That‚Äôs all there is to it!</p>
<h3>webpack</h3>
<p>The  <code class="inline">mix phx.new</code>  generator now uses webpack for asset generation instead of brunch. The development experience remains the same ‚Äì javascript goes in  <code class="inline">assets/js</code> , css goes in  <code class="inline">assets/css</code> , static assets live in  <code class="inline">assets/static</code> , so those not interested in JS tooling nuances can continue the same patterns while using webpack. Those in need of optimal js tooling can benefit from webpack‚Äôs more sophisticated code bunding, with dead code elimination and more.</p>
<h3>What‚Äôs Next</h3>
<p>With the release of 1.4, we‚Äôre ready to focus on other exciting initiatives around the Elixir and Phoenix ecosystem. Most notably, we are excited to integrate <a href="https://github.com/beam-telemetry/telemetry">telemetry</a> into Phoenix for metric tracking and visualization. Simultaneously, we are also working to rewrite <code class="inline">Phoenix.PubSub</code> into smaller building blocks and provide a first-class distributed programming toolkit for the community. You can track this progress over at the <a href="https://github.com/phoenixframework/firenest">Firenest</a> project.</p>
<p>In addition to telemetry and firenest initiatives, we are also working on <code class="inline">Phoenix.LiveView</code>, to enable server-rendered real-time experiences without all the complexity of today‚Äôs single page application landscape. LiveView can enable rich UX on par with single-page apps in certain usecases and we can‚Äôt wait to get the initial release out to the community.</p>
<p>My ElixirConf keynote covers telemetry and LiveView in detail:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Z2DU0qLfPIY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><h3>Programming Phoenix Book</h3>
<p>The <a href="https://pragprog.com/book/phoenix14/programming-phoenix-1-4">Programming Phoenix Book</a>
is in beta and available through PragProg, and includes all the latest changes for 1.4.
We have titled the book ‚Äú&gt;= 1.4‚Äù and consider it relatively future proof as we continue
minor version releases.</p>
<h3>Special Thank You‚Äôs</h3>
<p>I would like to specially thank Lo√Øc Hoguin for his work on Cowboy 2,
allowing us to provide a first-class HTTP2 experience. We would also like to thank Bram Verburg, who contributed the local SSL certificate generation, for cross-platform, dependency-free cert generation.</p>
<p>Additionally, I would like to thank Jos√© Valim and <a href="http://plataformatec.com.br">Plataformatec</a> for their work on the channel layer overhaul which provides an extensible foundation going forward.</p>
<p>As always, we have provided step-by-step instructions for bringing your 1.3.x apps up to speed:
<a href="https://gist.github.com/chrismccord/bb1f8b136f5a9e4abc0bfc07b832257e">https://gist.github.com/chrismccord/bb1f8b136f5a9e4abc0bfc07b832257e</a></p>
<p>Please report issues to the issue tracker, and find us on
#elixir-lang irc, elixir slack, and the Elixir forum if you have any
questions. The full list of changes from the changelog can be found below.</p>
<p>Happy hacking!</p>
<p>‚ÄìChris</p>
<h3>Changlog</h3>
<h4>Enhancements</h4>
<ul>
<li>[phx.new] Update Ecto deps with the release of Ecto 3.0 including <code class="inline">phoenix_ecto</code> 4.0
</li>
<li>[phx.new] Import Ecto‚Äôs <code class="inline">.formatter.exs</code> in new projects
</li>
<li>[phx.new] Use Ecto 3.0RC, with <code class="inline">ecto_sql</code> in new project deps
</li>
<li>[phx.new] Use Plug 1.7 with new <code class="inline">:plug_cowboy</code> dependency for cowboy adapter
</li>
<li>[phx.gen.html|json|schema|context] Support new Ecto 3.0 usec datetime types
</li>
<li>[Phoenix] Add <code class="inline">Phoenix.json_library/0</code> and replace <code class="inline">Poison</code> with <code class="inline">Jason</code> for JSON encoding in new projects
</li>
<li>[Endpoint] Add <code class="inline">Cowboy2Adapter</code> for HTTP2 support with cowboy2
</li>
<li>[Endpoint] The <code class="inline">socket/3</code> macro now accepts direct configuration about websockets and longpoll
</li>
<li>[Endpoint] Support MFA function in <code class="inline">:check_origin</code> config for custom origin checking
</li>
<li>[Endpoint] Add new <code class="inline">:phoenix_error_render</code> instrumentation callback
</li>
<li>[Endpoint] Log the configured url instead of raw IP when booting endpoint webserver
</li>
<li>[Endpoint] Allow custom keyword pairs to be passed to the socket <code class="inline">:connect_info</code> options.
</li>
<li>[Router] Display list of available routes on debugger 404 error page
</li>
<li>[Router] Raise on duplicate plugs in <code class="inline">pipe_through</code> scopes
</li>
<li>[Controller] Support partial file downloads with <code class="inline">:offset</code> and <code class="inline">:length</code> options to <code class="inline">send_download/3</code>
</li>
<li>[Controller] Add additional security headers to <code class="inline">put_secure_browser_headers</code> (<code class="inline">x-content-type-options</code>, <code class="inline">x-download-options</code>, and <code class="inline">x-permitted-cross-domain-policies</code>)
</li>
<li>[Controller] Add <code class="inline">put_router_url/2</code> to override the default URL generation pulled from endpoint configuration
</li>
<li>[Logger] Add whitelist support to <code class="inline">filter_parameters</code> logger configuration, via new <code class="inline">:keep</code> tuple format
</li>
<li>[Socket] Add new <code class="inline">phoenix_socket_connect</code> instrumentation
</li>
<li>[Socket] Improve error message when missing socket mount in endpoint
</li>
<li>[Logger] Log calls to user socket connect
</li>
<li>[Presence] Add <code class="inline">Presence.get_by_key</code> to fetch presences for specific user
</li>
<li>[CodeReloader] Add <code class="inline">:reloadable_apps</code> endpoint configuration option to allow recompiling local dependencies
</li>
<li>[ChannelTest] Respect user‚Äôs configured ExUnit <code class="inline">:assert_receive_timeout</code> for macro assertions
</li>
</ul>
<h4>Bug Fixes</h4>
<ul>
<li>Add missing <code class="inline">.formatter.exs</code> to hex package for proper elixir formatter integration
</li>
<li>[phx.gen.cert] Fix usage inside umbrella applications
</li>
<li>[phx.new] Revert <code class="inline">Routes.static_url</code> in app layout in favor of original <code class="inline">Routes.static_path</code>
</li>
<li>[phx.new] Use phoenix_live_reload 1.2-rc to fix hex version errors
</li>
<li>[phx.gen.json|html] Fix generator tests incorrectly encoding datetimes
</li>
<li>[phx.gen.cert] Fix generation of cert inside umbrella projects
</li>
<li>[Channel] Fix issue with WebSocket transport sending wrong ContentLength header with 403 response
</li>
<li>[Router] Fix forward aliases failing to expand within scope block
</li>
<li>[Router] Fix regression in router compilation failing to escape plug options
</li>
</ul>
<h4>phx.new installer</h4>
<ul>
<li>Generate new Elixir 1.5+ child spec (therefore new apps require Elixir v1.5)
</li>
<li>Use webpack for asset bundling
</li>
</ul>
<h4>Deprecations</h4>
<ul>
<li>[Controller] Passing a view in <code class="inline">render/3</code> and <code class="inline">render/4</code> is deprecated in favor of <code class="inline">put_view/2</code>
</li>
<li>[Endpoint] The <code class="inline">:handler</code> option in the endpoint is deprecated in favor of <code class="inline">:adapter</code>
</li>
<li>[Socket] <code class="inline">transport/3</code> is deprecated. The transport is now specified in the endpoint
</li>
<li>[Transport] The transport system has seen an overhaul and been drastically simplified. The previous mechanism for building transports is still supported but it is deprecated. Please see <code class="inline">Phoenix.Socket.Transport</code> for more information
</li>
</ul>
<h4>JavaScript client</h4>
<ul>
<li>Add new instance-based Presence API with simplified synchronization callbacks
</li>
<li>Accept a function for socket and channel <code class="inline">params</code> for dynamic parameter generation when connecting and joining
</li>
<li>Fix race condition when presence diff arrives before state
</li>
<li>Immediately rejoin channels on socket reconnect for faster recovery after reconnection
</li>
<li>Fix reconnect caused by pending heartbeat
</li>
</ul>

        </div>
      </div>
    </div>
  </div>
</div>

  </div>
  </body>
</html>
